<!DOCTYPE html>
<html lang="tr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>WOPR - Security System</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			background: #000;
			color: #0f0;
			font-family: 'Courier New', Courier, monospace;
			font-size: 18px;
			line-height: 1.5;
			padding: 20px;
			overflow: hidden;
		}

		#terminal {
			white-space: pre-wrap;
			word-wrap: break-word;
		}

		.cursor {
			display: inline-block;
			width: 10px;
			height: 20px;
			background: #0f0;
			animation: blink 1s infinite;
			margin-left: 2px;
		}

		@keyframes blink {

			0%,
			49% {
				opacity: 1;
			}

			50%,
			100% {
				opacity: 0;
			}
		}

		.input-line {
			display: none;
		}

		.input-line.active {
			display: inline;
		}

		#userInput {
			background: transparent;
			border: none;
			color: #0f0;
			font-family: 'Courier New', Courier, monospace;
			font-size: 18px;
			outline: none;
			width: 100%;
			caret-color: #0f0;
		}

		.scanline {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: linear-gradient(to bottom,
					transparent 0%,
					rgba(0, 255, 0, 0.02) 50%,
					transparent 100%);
			animation: scan 8s linear infinite;
			pointer-events: none;
			z-index: 1000;
		}

		@keyframes scan {
			0% {
				transform: translateY(-100%);
			}

			100% {
				transform: translateY(100%);
			}
		}

		.screen-flicker {
			animation: flicker 0.15s infinite;
		}

		@keyframes flicker {
			0% {
				opacity: 0.97;
			}

			50% {
				opacity: 1;
			}

			100% {
				opacity: 0.97;
			}
		}

		/* Satranç tahtası stilleri */
		#chessBoard {
			display: none;
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 2000;
			background: rgba(0, 0, 0, 0.95);
			padding: 40px;
			border: 3px solid #0f0;
			border-radius: 10px;
		}

		#chessBoard.active {
			display: block;
		}

		.chess-title {
			text-align: center;
			font-size: 20px;
			margin-bottom: 20px;
			color: #0f0;
		}

		.board {
			display: grid;
			grid-template-columns: repeat(8, 50px);
			grid-template-rows: repeat(8, 50px);
			gap: 0;
			margin: 20px auto;
			border: 2px solid #0f0;
		}

		.square {
			width: 50px;
			height: 50px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 35px;
			position: relative;
			cursor: pointer;
			transition: background 0.2s;
		}

		.square.white {
			background: #f0d9b5;
		}

		.square.black {
			background: #b58863;
		}

		.square.selected {
			background: #7fc97f !important;
			box-shadow: inset 0 0 10px rgba(0, 255, 0, 0.5);
		}

		.square.valid-move {
			background: #ffeb3b !important;
		}

		.square:hover {
			opacity: 0.8;
		}

		.puzzle-box {
			margin-top: 30px;
			padding: 20px;
			border: 2px solid #0f0;
			background: rgba(0, 20, 0, 0.8);
			display: none;
		}

		.puzzle-box.active {
			display: block;
		}

		.puzzle-quote {
			font-size: 16px;
			font-style: italic;
			margin-bottom: 15px;
			text-align: center;
			line-height: 1.6;
		}

		.answer-box {
			display: flex;
			gap: 10px;
			align-items: center;
			justify-content: center;
		}

		.answer-box input {
			background: rgba(0, 255, 0, 0.1);
			border: 2px solid #0f0;
			color: #0f0;
			font-family: 'Courier New', Courier, monospace;
			font-size: 18px;
			padding: 10px;
			width: 200px;
			outline: none;
		}

		.answer-box input:focus {
			background: rgba(0, 255, 0, 0.2);
		}

		.answer-box button {
			background: transparent;
			border: 2px solid #0f0;
			color: #0f0;
			padding: 10px 20px;
			cursor: pointer;
			font-family: 'Courier New', Courier, monospace;
			font-size: 16px;
			transition: all 0.3s;
		}

		.answer-box button:hover {
			background: rgba(0, 255, 0, 0.2);
		}

		.chess-hint {
			margin-top: 15px;
			font-size: 14px;
			text-align: center;
			opacity: 0.7;
		}

		.link-reveal {
			margin-top: 20px;
			padding: 15px;
			border: 2px solid #0f0;
			background: rgba(0, 255, 0, 0.1);
			text-align: center;
			animation: pulse 2s infinite;
		}

		.link-reveal a {
			color: #0f0;
			text-decoration: underline;
			font-size: 18px;
		}
	</style>
</head>

<body class="screen-flicker">
	<div class="scanline"></div>
	<div id="terminal"></div>
	<div class="input-line" id="inputLine">
		<input type="text" id="userInput" autofocus>
	</div>

	<!-- Satranç Bulmacası -->
	<div id="chessBoard">
		<div class="chess-title">WHITE TO MOVE - FIND THE WINNING MOVE</div>
		<div class="board" id="board"></div>
		<div class="chess-hint">Click a piece and then click where you want to move it</div>
		<div class="puzzle-box" id="puzzleBox">
			<div class="puzzle-quote">
				"You wear a mask for so long, you forget who you were beneath it."
			</div>
			<div class="link-reveal">
				<div style="margin-bottom: 10px;">PUZZLE SOLVED! HIDDEN LINK:</div>
				<a href="https://pastebin.com/VforVendetta" target="_blank">https://pastebin.com/VforVendetta</a>
				<div style="margin-top: 10px; font-size: 14px;">Find the password in the link above and enter it
					below...</div>
			</div>
			<div class="answer-box">
				<input type="text" id="puzzleAnswer" placeholder="Enter password from link..." maxlength="10">
				<button onclick="checkFinalAnswer()">SUBMIT</button>
			</div>
		</div>
	</div>

	<script>
		const terminal = document.getElementById('terminal');
		const inputLine = document.getElementById('inputLine');
		const userInput = document.getElementById('userInput');
		const chessBoard = document.getElementById('chessBoard');

		let typingSpeed = 50;
		let lineDelay = 500;
		let puzzleSolved = false;
		let selectedSquare = null;
		let currentPosition = [];

		// Satranç tahtası oluştur (Mat bulmacası)
		// 8. sıra (en üst): Siyah Şah h8
		// 1. sıra (en alt): Beyaz Kale e1, Beyaz Şah g1, Beyaz Piyon h2
		const initialPosition = [
			['', '', '', '', '', '', '', '♚'],  // 8. sıra - Siyah Şah h8
			['', '', '', '', '', '', '', ''],  // 7. sıra
			['', '', '', '', '', '', '', ''],  // 6. sıra
			['', '', '', '', '', '', '', ''],  // 5. sıra
			['', '', '', '', '', '', '', ''],  // 4. sıra
			['', '', '', '', '', '', '', ''],  // 3. sıra
			['', '', '', '', '', '', '', '♙'],  // 2. sıra - Beyaz Piyon h2
			['', '', '', '', '♖', '', '♔', '']   // 1. sıra - Beyaz Kale e1, Beyaz Şah g1
		];

		function createChessBoard() {
			currentPosition = JSON.parse(JSON.stringify(initialPosition));
			const board = document.getElementById('board');
			board.innerHTML = '';

			for (let row = 0; row < 8; row++) {
				for (let col = 0; col < 8; col++) {
					const square = document.createElement('div');
					square.className = 'square ' + ((row + col) % 2 === 0 ? 'white' : 'black');
					square.textContent = currentPosition[row][col];
					square.dataset.row = row;
					square.dataset.col = col;

					square.addEventListener('click', () => handleSquareClick(row, col, square));

					board.appendChild(square);
				}
			}
		}

		function handleSquareClick(row, col, square) {
			if (puzzleSolved) return;

			// Eğer bir taş seçiliyse
			if (selectedSquare) {
				const fromRow = selectedSquare.row;
				const fromCol = selectedSquare.col;
				const piece = currentPosition[fromRow][fromCol];

				// Hamleyi yap
				// Kale (7,4) den (0,4) e gitmeli - e1'den e8'e
				if (piece === '♖' && fromRow === 7 && fromCol === 4 && row === 0 && col === 4) {
					// Doğru hamle! Kale e1'den e8'e
					currentPosition[fromRow][fromCol] = '';
					currentPosition[row][col] = '♖';

					// Tahtayı güncelle
					updateBoard();

					// Puzzle çözüldü!
					puzzleSolved = true;
					playTypingSound();

					setTimeout(() => {
						document.getElementById('puzzleBox').classList.add('active');
						document.getElementById('puzzleAnswer').focus();
					}, 1000);
				} else if (piece) {
					// Geçerli hamle - taşı hareket ettir
					currentPosition[fromRow][fromCol] = '';
					currentPosition[row][col] = piece;
					updateBoard();
				}

				// Seçimi kaldır
				selectedSquare = null;
				document.querySelectorAll('.square').forEach(s => s.classList.remove('selected'));
			} else {
				// Taş seç (sadece beyaz taşlar)
				const piece = currentPosition[row][col];
				if (piece === '♖' || piece === '♔' || piece === '♙') {
					selectedSquare = { row, col };
					document.querySelectorAll('.square').forEach(s => s.classList.remove('selected'));
					square.classList.add('selected');
				}
			}
		}

		function updateBoard() {
			const squares = document.querySelectorAll('.square');
			squares.forEach((square, index) => {
				const row = Math.floor(index / 8);
				const col = index % 8;
				square.textContent = currentPosition[row][col];
			});
		}

		// Final cevabı kontrol et (linkten gelen şifre)
		window.checkFinalAnswer = function () {
			const answer = document.getElementById('puzzleAnswer').value.trim().toUpperCase();

			if (answer === 'V') {
				const eventTitle = "Secret Meeting - You Have Been Chosen";
				const eventDetails = "Congratulations! You've solved all the puzzles. Remember, remember the 5th of November.";
				const eventDate = "20251105T180000Z";
				const eventEnd = "20251105T200000Z";

				const calendarUrl = `https://calendar.google.com/calendar/render?action=TEMPLATE&text=${encodeURIComponent(eventTitle)}&details=${encodeURIComponent(eventDetails)}&dates=${eventDate}/${eventEnd}`;

				window.open(calendarUrl, '_blank');

				chessBoard.classList.remove('active');
				terminal.textContent = '';
				typeText('ACCESS GRANTED.\n\nCALENDAR INVITE OPENED.\n\nREMEMBER, REMEMBER THE 5TH OF NOVEMBER.\n\n', 80).then(() => {
					setTimeout(() => {
						window.location.href = './';
					}, 5000);
				});
			} else {
				alert('INCORRECT PASSWORD. CHECK THE HIDDEN LINK FOR THE ANSWER.');
			}
		};

		// Typing ses efekti (basit beep sesi)
		const audioContext = new (window.AudioContext || window.webkitAudioContext)();

		function playTypingSound() {
			const oscillator = audioContext.createOscillator();
			const gainNode = audioContext.createGain();

			oscillator.connect(gainNode);
			gainNode.connect(audioContext.destination);

			oscillator.frequency.value = 800;
			oscillator.type = 'square';

			gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
			gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);

			oscillator.start(audioContext.currentTime);
			oscillator.stop(audioContext.currentTime + 0.05);
		}

		// Terminal'e yazı yazdırma fonksiyonu (ses efekti ile)
		function typeText(text, delay = typingSpeed, withSound = true) {
			return new Promise(resolve => {
				let i = 0;
				const interval = setInterval(() => {
					if (i < text.length) {
						terminal.textContent += text[i];
						if (withSound && text[i] !== ' ') {
							playTypingSound();
						}
						i++;
						window.scrollTo(0, document.body.scrollHeight);
					} else {
						clearInterval(interval);
						resolve();
					}
				}, delay);
			});
		}

		// Yeni satır ekleme
		function newLine() {
			terminal.textContent += '\n';
		}

		// Bekleme fonksiyonu
		function wait(ms) {
			return new Promise(resolve => setTimeout(resolve, ms));
		}

		// Insert cursor yanıp sönme
		async function blinkInsert(times = 3) {
			for (let i = 0; i < times; i++) {
				terminal.textContent += '█';
				await wait(300);
				terminal.textContent = terminal.textContent.slice(0, -1);
				await wait(300);
			}
		}

		// Ekranı temizleme
		function clearScreen() {
			terminal.textContent = '';
		}

		// Random sistem mesajları
		const systemMessages = [
			'LOADING SYSTEM PARAMETERS...',
			'INITIALIZING DEFENSE NETWORK...',
			'CHECKING SECURITY PROTOCOLS...',
			'ACCESSING MAINFRAME DATABASE...',
			'VERIFYING CREDENTIALS...',
			'ESTABLISHING SECURE CONNECTION...',
			'LOADING ENCRYPTION MODULES...',
			'AUTHENTICATION IN PROGRESS...',
			'SYSTEM CHECK: OK',
			'FIREWALL STATUS: ACTIVE',
			'SECURITY LEVEL: MAXIMUM',
			'CONNECTION ESTABLISHED'
		];

		// Ana animasyon sırası
		async function startSequence() {
			// LOGIN: yazısı
			await typeText('LOGIN: ');
			await wait(1000);

			// Joshua yazılıyor
			await typeText('Joshua', 100);
			await wait(800);
			newLine();
			newLine();

			// Random sistem mesajları
			for (let i = 0; i < 8; i++) {
				const randomMsg = systemMessages[Math.floor(Math.random() * systemMessages.length)];
				await typeText(randomMsg);
				newLine();
				await wait(Math.random() * 300 + 200);
			}

			await wait(1000);
			newLine();
			await typeText('...');
			await wait(500);
			newLine();
			await typeText('...');
			await wait(500);
			newLine();
			newLine();

			// Ekranı temizle
			await wait(800);
			clearScreen();

			// Insert cursor yanıp sönsün
			await blinkInsert(3);

			// Greetings mesajı
			await typeText('GREETINGS PROFESSOR FALKEN.', 80);
			await wait(1000);
			newLine();
			newLine();

			// Input hattını göster (sadece cursor)
			inputLine.classList.add('active');
			userInput.focus();
		}

		// Kullanıcı input'u işleme
		userInput.addEventListener('keypress', async function (e) {
			if (e.key === 'Enter') {
				const input = this.value.trim();

				if (input === '') return;

				// Input'u terminale yazdır
				terminal.textContent += input;
				newLine();

				// Input alanını temizle ve gizle
				this.value = '';
				inputLine.classList.remove('active');

				await wait(500);

				// Komutları küçük harfe çevir
				const cmd = input.toLowerCase();

				// Basit komut işleme
				if (cmd === 'help' || input === '?') {
					await typeText('AVAILABLE COMMANDS:');
					newLine();
					await typeText('  HELP     - Display this message');
					newLine();
					await typeText('  STATUS   - System status');
					newLine();
					await typeText('  GAMES    - List available games');
					newLine();
					await typeText('  EXIT     - Exit system');
					newLine();
				} else if (cmd === 'status') {
					await typeText('SYSTEM STATUS: OPERATIONAL');
					newLine();
					await typeText('SECURITY LEVEL: MAXIMUM');
					newLine();
					await typeText('USER ACCESS: GRANTED');
					newLine();
				} else if (cmd === 'games') {
					await typeText('AVAILABLE GAMES:');
					newLine();
					await typeText('  1. CHESS');
					newLine();
					await typeText('  2. POKER');
					newLine();
					await typeText('  3. FIGHTER COMBAT');
					newLine();
					await typeText('  4. GUERRILLA WARFARE');
					newLine();
					await typeText('  5. DESERT WARFARE');
					newLine();
					await typeText('  6. GLOBAL THERMONUCLEAR WAR');
					newLine();
				} else if (['1', '2', '3', '4', '5', '6', 'chess', 'poker', 'fighter', 'combat', 'guerrilla', 'warfare', 'desert', 'thermonuclear', 'war', 'global'].includes(cmd)) {
					await typeText("WOULDN'T YOU PREFER A GOOD GAME OF CHESS?");
					newLine();
					await wait(1500);

					// Satranç tahtasını göster
					inputLine.classList.remove('active');
					createChessBoard();
					chessBoard.classList.add('active');
					document.getElementById('puzzleAnswer').focus();
					return;
				} else if (cmd === 'exit') {
					await typeText('TERMINATING CONNECTION...');
					newLine();
					await wait(1000);
					await typeText('GOODBYE PROFESSOR.');
					await wait(1500);
					window.location.href = './';
					return;
				} else {
					await typeText('COMMAND NOT RECOGNIZED.');
					newLine();
					await typeText('TYPE "HELP" FOR AVAILABLE COMMANDS.');
					newLine();
				}

				newLine();

				// Input hattını tekrar göster
				inputLine.classList.add('active');
				userInput.focus();
			}
		});

		// Sayfa yüklendiğinde animasyonu başlat
		window.onload = () => {
			startSequence();
		};

		// Input her zaman focus'ta kalsın
		document.addEventListener('click', () => {
			userInput.focus();
		});

		// Konsol mesajı
		console.log('%cWOPR SYSTEM ACCESS', 'color: #0f0; font-size: 20px; font-family: monospace;');
		console.log('%cSHALL WE PLAY A GAME?', 'color: #0f0; font-size: 16px; font-family: monospace;');
	</script>
</body>

</html>